\PassOptionsToPackage{unicode=true}{hyperref} % options for packages loaded elsewhere
\PassOptionsToPackage{hyphens}{url}
%
\documentclass[]{article}
\usepackage{lmodern}
\usepackage{amssymb,amsmath}
\usepackage{ifxetex,ifluatex}
\usepackage{fixltx2e} % provides \textsubscript
\ifnum 0\ifxetex 1\fi\ifluatex 1\fi=0 % if pdftex
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provides euro and other symbols
\else % if luatex or xelatex
  \usepackage{unicode-math}
  \defaultfontfeatures{Ligatures=TeX,Scale=MatchLowercase}
\fi
% use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
% use microtype if available
\IfFileExists{microtype.sty}{%
\usepackage[]{microtype}
\UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\IfFileExists{parskip.sty}{%
\usepackage{parskip}
}{% else
\setlength{\parindent}{0pt}
\setlength{\parskip}{6pt plus 2pt minus 1pt}
}
\usepackage{hyperref}
\hypersetup{
            pdftitle={Data Cleaning},
            pdfauthor={Carlos Tejeda Ocampo A011170840},
            pdfborder={0 0 0},
            breaklinks=true}
\urlstyle{same}  % don't use monospace font for urls
\usepackage[margin=1in]{geometry}
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.77,0.63,0.00}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{graphicx,grffile}
\makeatletter
\def\maxwidth{\ifdim\Gin@nat@width>\linewidth\linewidth\else\Gin@nat@width\fi}
\def\maxheight{\ifdim\Gin@nat@height>\textheight\textheight\else\Gin@nat@height\fi}
\makeatother
% Scale images if necessary, so that they will not overflow the page
% margins by default, and it is still possible to overwrite the defaults
% using explicit options in \includegraphics[width, height, ...]{}
\setkeys{Gin}{width=\maxwidth,height=\maxheight,keepaspectratio}
\setlength{\emergencystretch}{3em}  % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\setcounter{secnumdepth}{0}
% Redefines (sub)paragraphs to behave more like sections
\ifx\paragraph\undefined\else
\let\oldparagraph\paragraph
\renewcommand{\paragraph}[1]{\oldparagraph{#1}\mbox{}}
\fi
\ifx\subparagraph\undefined\else
\let\oldsubparagraph\subparagraph
\renewcommand{\subparagraph}[1]{\oldsubparagraph{#1}\mbox{}}
\fi

% set default figure placement to htbp
\makeatletter
\def\fps@figure{htbp}
\makeatother


\title{Data Cleaning}
\author{Carlos Tejeda Ocampo A011170840}
\date{}

\begin{document}
\maketitle

\hypertarget{r-data-cleaning}{%
\section{R Data Cleaning}\label{r-data-cleaning}}

\hypertarget{ticket-sales-dataset}{%
\subsection{Ticket Sales Dataset}\label{ticket-sales-dataset}}

Data Cleaning of messy Ticket Sales Dataset

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#sales <- read.csv("sales.csv", stringsAsFactors = FALSE)}

\NormalTok{url_sales <-}\StringTok{ 'http://s3.amazonaws.com/assets.datacamp.com/production/course_1294/datasets/sales.csv'}
\NormalTok{sales <-}\StringTok{ }\KeywordTok{read.csv}\NormalTok{(url_sales, }\DataTypeTok{stringsAsFactors=}\NormalTok{F)}
\end{Highlighting}
\end{Shaded}

\hypertarget{examine-data}{%
\subsubsection{Examine Data}\label{examine-data}}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{dim}\NormalTok{(sales)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] 5000   46
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#head(sales)}
\KeywordTok{names}\NormalTok{(sales)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##  [1] "X"                      "event_id"               "primary_act_id"        
##  [4] "secondary_act_id"       "purch_party_lkup_id"    "event_name"            
##  [7] "primary_act_name"       "secondary_act_name"     "major_cat_name"        
## [10] "minor_cat_name"         "la_event_type_cat"      "event_disp_name"       
## [13] "ticket_text"            "tickets_purchased_qty"  "trans_face_val_amt"    
## [16] "delivery_type_cd"       "event_date_time"        "event_dt"              
## [19] "presale_dt"             "onsale_dt"              "sales_ord_create_dttm" 
## [22] "sales_ord_tran_dt"      "print_dt"               "timezn_nm"             
## [25] "venue_city"             "venue_state"            "venue_postal_cd_sgmt_1"
## [28] "sales_platform_cd"      "print_flg"              "la_valid_tkt_event_flg"
## [31] "fin_mkt_nm"             "web_session_cookie_val" "gndr_cd"               
## [34] "age_yr"                 "income_amt"             "edu_val"               
## [37] "edu_1st_indv_val"       "edu_2nd_indv_val"       "adults_in_hh_num"      
## [40] "married_ind"            "child_present_ind"      "home_owner_ind"        
## [43] "occpn_val"              "occpn_1st_val"          "occpn_2nd_val"         
## [46] "dist_to_ven"
\end{verbatim}

\hypertarget{sumarize-data}{%
\subsubsection{Sumarize Data}\label{sumarize-data}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#str(sales)}
\CommentTok{#summary(sales)}
\KeywordTok{glimpse}\NormalTok{(sales)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 46
## $ X                      <int> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 1...
## $ event_id               <chr> "abcaf1adb99a935fc661", "6c56d7f08c95f2aa453...
## $ primary_act_id         <chr> "43f0436b905bfa7c2eec", "1a3e9aecd0617706a79...
## $ secondary_act_id       <chr> "b85143bf51323b72e53c", "f53529c5679ea6ca5a4...
## $ purch_party_lkup_id    <chr> "7dfa56dd7d5956b17587", "4f9e6fc637eaf7b736c...
## $ event_name             <chr> "Xfinity Center Mansfield Premier Parking: F...
## $ primary_act_name       <chr> "XFINITY Center Mansfield Premier Parking", ...
## $ secondary_act_name     <chr> "NULL", "Dave Matthews Band", "NULL", "NULL"...
## $ major_cat_name         <chr> "MISC", "MISC", "MISC", "MISC", "MISC", "MIS...
## $ minor_cat_name         <chr> "PARKING", "CAMPING", "PARKING", "PARKING", ...
## $ la_event_type_cat      <chr> "PARKING", "INVALID", "PARKING", "PARKING", ...
## $ event_disp_name        <chr> "Xfinity Center Mansfield Premier Parking: F...
## $ ticket_text            <chr> "   THIS TICKET IS VALID        FOR PARKING ...
## $ tickets_purchased_qty  <int> 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 4, 1, 1,...
## $ trans_face_val_amt     <dbl> 45, 75, 5, 20, 20, 10, 30, 28, 20, 25, 20, 9...
## $ delivery_type_cd       <chr> "eTicket", "TicketFast", "TicketFast", "Mail...
## $ event_date_time        <chr> "2015-09-12 23:30:00", "2009-09-05 01:00:00"...
## $ event_dt               <chr> "2015-09-12", "2009-09-04", "2006-04-21", "2...
## $ presale_dt             <chr> "NULL", "NULL", "NULL", "NULL", "2005-03-02"...
## $ onsale_dt              <chr> "2015-05-15", "2009-03-13", "2006-02-25", "2...
## $ sales_ord_create_dttm  <chr> "2015-09-11 18:17:45", "2009-07-06 00:00:00"...
## $ sales_ord_tran_dt      <chr> "2015-09-11", "2009-07-05", "2006-04-05", "2...
## $ print_dt               <chr> "2015-09-12", "2009-09-01", "2006-04-05", "2...
## $ timezn_nm              <chr> "EST", "PST", "MST", "CST", "PST", "PST", "E...
## $ venue_city             <chr> "MANSFIELD", "QUINCY", "PHOENIX", "DALLAS", ...
## $ venue_state            <chr> "MASSACHUSETTS", "WASHINGTON", "ARIZONA", "T...
## $ venue_postal_cd_sgmt_1 <chr> "02048", "98848", "85003", "75210", "98092",...
## $ sales_platform_cd      <chr> "www.concerts.livenation.com", "NULL", "NULL...
## $ print_flg              <chr> "T ", "T ", "T ", "T ", "T ", "T ", "T ", "T...
## $ la_valid_tkt_event_flg <chr> "N ", "N ", "N ", "N ", "N ", "N ", "N ", "N...
## $ fin_mkt_nm             <chr> "Boston", "Seattle", "Arizona", "Dallas", "S...
## $ web_session_cookie_val <chr> "7dfa56dd7d5956b17587", "4f9e6fc637eaf7b736c...
## $ gndr_cd                <chr> NA, NA, NA, NA, NA, NA, "M", NA, NA, NA, "M"...
## $ age_yr                 <chr> NA, NA, NA, NA, NA, NA, "28", NA, NA, NA, "8...
## $ income_amt             <chr> NA, NA, NA, NA, NA, NA, "112500", NA, NA, NA...
## $ edu_val                <chr> NA, NA, NA, NA, NA, NA, "High School", NA, N...
## $ edu_1st_indv_val       <chr> NA, NA, NA, NA, NA, NA, "High School", NA, N...
## $ edu_2nd_indv_val       <chr> NA, NA, NA, NA, NA, NA, "NULL", NA, NA, NA, ...
## $ adults_in_hh_num       <chr> NA, NA, NA, NA, NA, NA, "4", NA, NA, NA, "2"...
## $ married_ind            <chr> NA, NA, NA, NA, NA, NA, "0", NA, NA, NA, "1"...
## $ child_present_ind      <chr> NA, NA, NA, NA, NA, NA, "1", NA, NA, NA, "NU...
## $ home_owner_ind         <chr> NA, NA, NA, NA, NA, NA, "0", NA, NA, NA, "1"...
## $ occpn_val              <chr> NA, NA, NA, NA, NA, NA, "NULL", NA, NA, NA, ...
## $ occpn_1st_val          <chr> NA, NA, NA, NA, NA, NA, "Craftsman Blue Coll...
## $ occpn_2nd_val          <chr> NA, NA, NA, NA, NA, NA, "NULL", NA, NA, NA, ...
## $ dist_to_ven            <int> NA, 59, NA, NA, NA, NA, NA, NA, NA, NA, NA, ...
\end{verbatim}

\hypertarget{remove-unnecesary-columns}{%
\subsubsection{Remove unnecesary
columns}\label{remove-unnecesary-columns}}

The first column is redundant, the second, third and fourth columns
contains no relevant information and the last sixteen columns have too
many missing values, so we remove them.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sales2 <-}\StringTok{ }\NormalTok{sales[,}\KeywordTok{c}\NormalTok{(}\DecValTok{6}\OperatorTok{:}\DecValTok{30}\NormalTok{)]}
\KeywordTok{glimpse}\NormalTok{(sales2)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 25
## $ event_name             <chr> "Xfinity Center Mansfield Premier Parking: F...
## $ primary_act_name       <chr> "XFINITY Center Mansfield Premier Parking", ...
## $ secondary_act_name     <chr> "NULL", "Dave Matthews Band", "NULL", "NULL"...
## $ major_cat_name         <chr> "MISC", "MISC", "MISC", "MISC", "MISC", "MIS...
## $ minor_cat_name         <chr> "PARKING", "CAMPING", "PARKING", "PARKING", ...
## $ la_event_type_cat      <chr> "PARKING", "INVALID", "PARKING", "PARKING", ...
## $ event_disp_name        <chr> "Xfinity Center Mansfield Premier Parking: F...
## $ ticket_text            <chr> "   THIS TICKET IS VALID        FOR PARKING ...
## $ tickets_purchased_qty  <int> 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 4, 1, 1,...
## $ trans_face_val_amt     <dbl> 45, 75, 5, 20, 20, 10, 30, 28, 20, 25, 20, 9...
## $ delivery_type_cd       <chr> "eTicket", "TicketFast", "TicketFast", "Mail...
## $ event_date_time        <chr> "2015-09-12 23:30:00", "2009-09-05 01:00:00"...
## $ event_dt               <chr> "2015-09-12", "2009-09-04", "2006-04-21", "2...
## $ presale_dt             <chr> "NULL", "NULL", "NULL", "NULL", "2005-03-02"...
## $ onsale_dt              <chr> "2015-05-15", "2009-03-13", "2006-02-25", "2...
## $ sales_ord_create_dttm  <chr> "2015-09-11 18:17:45", "2009-07-06 00:00:00"...
## $ sales_ord_tran_dt      <chr> "2015-09-11", "2009-07-05", "2006-04-05", "2...
## $ print_dt               <chr> "2015-09-12", "2009-09-01", "2006-04-05", "2...
## $ timezn_nm              <chr> "EST", "PST", "MST", "CST", "PST", "PST", "E...
## $ venue_city             <chr> "MANSFIELD", "QUINCY", "PHOENIX", "DALLAS", ...
## $ venue_state            <chr> "MASSACHUSETTS", "WASHINGTON", "ARIZONA", "T...
## $ venue_postal_cd_sgmt_1 <chr> "02048", "98848", "85003", "75210", "98092",...
## $ sales_platform_cd      <chr> "www.concerts.livenation.com", "NULL", "NULL...
## $ print_flg              <chr> "T ", "T ", "T ", "T ", "T ", "T ", "T ", "T...
## $ la_valid_tkt_event_flg <chr> "N ", "N ", "N ", "N ", "N ", "N ", "N ", "N...
\end{verbatim}

\hypertarget{separating-information-from-columns}{%
\subsubsection{Separating information from
columns}\label{separating-information-from-columns}}

event\_date\_time and sales\_ord\_create\_dttm include both date and
hour in the same value. We need to separate these values to facilitate
the analysis.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sales3 <-}\StringTok{ }\KeywordTok{separate}\NormalTok{(sales2, event_date_time, }\KeywordTok{c}\NormalTok{(}\StringTok{'event_dt'}\NormalTok{, }\StringTok{'event_time'}\NormalTok{), }\DataTypeTok{sep =} \StringTok{" "}\NormalTok{)}
\NormalTok{col <-}\StringTok{ }\KeywordTok{str_detect}\NormalTok{(}\KeywordTok{names}\NormalTok{(sales3),}\StringTok{'event'}\NormalTok{)}
\KeywordTok{glimpse}\NormalTok{(sales3[,col])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 6
## $ event_name             <chr> "Xfinity Center Mansfield Premier Parking: F...
## $ la_event_type_cat      <chr> "PARKING", "INVALID", "PARKING", "PARKING", ...
## $ event_disp_name        <chr> "Xfinity Center Mansfield Premier Parking: F...
## $ event_dt               <chr> "2015-09-12", "2009-09-05", "2006-04-22", "2...
## $ event_time             <chr> "23:30:00", "01:00:00", "01:30:00", "00:00:0...
## $ la_valid_tkt_event_flg <chr> "N ", "N ", "N ", "N ", "N ", "N ", "N ", "N...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(sales3}\OperatorTok{$}\NormalTok{sales_ord_create_dttm)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## [1] "2015-09-11 18:17:45" "2009-07-06 00:00:00" "2006-04-05 00:00:00"
## [4] "2011-07-01 17:38:50" "2005-06-18 00:00:00" "2012-07-21 17:20:18"
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Split sales_ord_create_dttm: sales5}
\NormalTok{sales4 <-}\StringTok{ }\KeywordTok{separate}\NormalTok{(sales3, sales_ord_create_dttm, }\KeywordTok{c}\NormalTok{(}\StringTok{'ord_create_dt'}\NormalTok{, }\StringTok{'ord_create_time'}\NormalTok{), }\DataTypeTok{sep =} \StringTok{" "}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: Expected 2 pieces. Missing pieces filled with `NA` in 4 rows [2516,
## 3863, 4082, 4183].
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{## check new columns}
\NormalTok{col <-}\StringTok{ }\KeywordTok{str_detect}\NormalTok{(}\KeywordTok{names}\NormalTok{(sales4),}\StringTok{'ord_create'}\NormalTok{)}
\KeywordTok{glimpse}\NormalTok{(sales4[,col])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 2
## $ ord_create_dt   <chr> "2015-09-11", "2009-07-06", "2006-04-05", "2011-07-...
## $ ord_create_time <chr> "18:17:45", "00:00:00", "00:00:00", "17:38:50", "00...
\end{verbatim}

\hypertarget{identifying-and-formatting-date-and-time}{%
\subsubsection{Identifying and formatting date and
time}\label{identifying-and-formatting-date-and-time}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{date_cols <-}\StringTok{ }\KeywordTok{str_detect}\NormalTok{(}\KeywordTok{colnames}\NormalTok{(sales4), }\StringTok{"dt"}\NormalTok{)}
\KeywordTok{glimpse}\NormalTok{(sales4[,date_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 6
## $ event_dt          <chr> "2015-09-12", "2009-09-05", "2006-04-22", "2011-0...
## $ presale_dt        <chr> "NULL", "NULL", "NULL", "NULL", "2005-03-02", "NU...
## $ onsale_dt         <chr> "2015-05-15", "2009-03-13", "2006-02-25", "2011-0...
## $ ord_create_dt     <chr> "2015-09-11", "2009-07-06", "2006-04-05", "2011-0...
## $ sales_ord_tran_dt <chr> "2015-09-11", "2009-07-05", "2006-04-05", "2011-0...
## $ print_dt          <chr> "2015-09-12", "2009-09-01", "2006-04-05", "2011-0...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sales4[, date_cols] <-}\StringTok{ }\KeywordTok{lapply}\NormalTok{(sales4[, date_cols], ymd)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning: 2892 failed to parse.
\end{verbatim}

\begin{verbatim}
## Warning: 101 failed to parse.
\end{verbatim}

\begin{verbatim}
## Warning: 4 failed to parse.
\end{verbatim}

\begin{verbatim}
## Warning: 424 failed to parse.
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{glimpse}\NormalTok{(sales4[,date_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 6
## $ event_dt          <date> 2015-09-12, 2009-09-05, 2006-04-22, 2011-09-03, ...
## $ presale_dt        <date> NA, NA, NA, NA, 2005-03-02, NA, NA, NA, NA, NA, ...
## $ onsale_dt         <date> 2015-05-15, 2009-03-13, 2006-02-25, 2011-04-22, ...
## $ ord_create_dt     <date> 2015-09-11, 2009-07-06, 2006-04-05, 2011-07-01, ...
## $ sales_ord_tran_dt <date> 2015-09-11, 2009-07-05, 2006-04-05, 2011-07-01, ...
## $ print_dt          <date> 2015-09-12, 2009-09-01, 2006-04-05, 2011-07-06, ...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{time_cols <-}\StringTok{ }\KeywordTok{str_detect}\NormalTok{(}\KeywordTok{colnames}\NormalTok{(sales4), }\StringTok{"_time"}\NormalTok{)}
\KeywordTok{glimpse}\NormalTok{(sales4[,time_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 2
## $ event_time      <chr> "23:30:00", "01:00:00", "01:30:00", "00:00:00", "01...
## $ ord_create_time <chr> "18:17:45", "00:00:00", "00:00:00", "17:38:50", "00...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sales4[, time_cols] <-}\StringTok{ }\KeywordTok{lapply}\NormalTok{(sales4[, time_cols], hms)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Warning in .parse_hms(..., order = "HMS", quiet = quiet): Some strings failed to
## parse, or all strings are NAs
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{glimpse}\NormalTok{(sales4[,time_cols])}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 2
## $ event_time      <Period> 23H 30M 0S, 1H 0M 0S, 1H 30M 0S, 0S, 1H 0M 0S, 2...
## $ ord_create_time <Period> 18H 17M 45S, 0S, 0S, 17H 38M 50S, 0S, 17H 20M 18...
\end{verbatim}

\hypertarget{combine-venue_city-and-venue_state-columns}{%
\subsubsection{Combine venue\_city and venue\_state
columns}\label{combine-venue_city-and-venue_state-columns}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{sales5 <-}\StringTok{ }\KeywordTok{unite}\NormalTok{(sales4, venue_city_state, venue_city, venue_state, }\DataTypeTok{sep =} \StringTok{", "}\NormalTok{)}
\KeywordTok{glimpse}\NormalTok{(sales5)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 5,000
## Variables: 25
## $ event_name             <chr> "Xfinity Center Mansfield Premier Parking: F...
## $ primary_act_name       <chr> "XFINITY Center Mansfield Premier Parking", ...
## $ secondary_act_name     <chr> "NULL", "Dave Matthews Band", "NULL", "NULL"...
## $ major_cat_name         <chr> "MISC", "MISC", "MISC", "MISC", "MISC", "MIS...
## $ minor_cat_name         <chr> "PARKING", "CAMPING", "PARKING", "PARKING", ...
## $ la_event_type_cat      <chr> "PARKING", "INVALID", "PARKING", "PARKING", ...
## $ event_disp_name        <chr> "Xfinity Center Mansfield Premier Parking: F...
## $ ticket_text            <chr> "   THIS TICKET IS VALID        FOR PARKING ...
## $ tickets_purchased_qty  <int> 1, 1, 1, 1, 1, 2, 1, 1, 1, 1, 1, 2, 4, 1, 1,...
## $ trans_face_val_amt     <dbl> 45, 75, 5, 20, 20, 10, 30, 28, 20, 25, 20, 9...
## $ delivery_type_cd       <chr> "eTicket", "TicketFast", "TicketFast", "Mail...
## $ event_dt               <date> 2015-09-12, 2009-09-05, 2006-04-22, 2011-09...
## $ event_time             <Period> 23H 30M 0S, 1H 0M 0S, 1H 30M 0S, 0S, 1H 0...
## $ presale_dt             <date> NA, NA, NA, NA, 2005-03-02, NA, NA, NA, NA,...
## $ onsale_dt              <date> 2015-05-15, 2009-03-13, 2006-02-25, 2011-04...
## $ ord_create_dt          <date> 2015-09-11, 2009-07-06, 2006-04-05, 2011-07...
## $ ord_create_time        <Period> 18H 17M 45S, 0S, 0S, 17H 38M 50S, 0S, 17H...
## $ sales_ord_tran_dt      <date> 2015-09-11, 2009-07-05, 2006-04-05, 2011-07...
## $ print_dt               <date> 2015-09-12, 2009-09-01, 2006-04-05, 2011-07...
## $ timezn_nm              <chr> "EST", "PST", "MST", "CST", "PST", "PST", "E...
## $ venue_city_state       <chr> "MANSFIELD, MASSACHUSETTS", "QUINCY, WASHING...
## $ venue_postal_cd_sgmt_1 <chr> "02048", "98848", "85003", "75210", "98092",...
## $ sales_platform_cd      <chr> "www.concerts.livenation.com", "NULL", "NULL...
## $ print_flg              <chr> "T ", "T ", "T ", "T ", "T ", "T ", "T ", "T...
## $ la_valid_tkt_event_flg <chr> "N ", "N ", "N ", "N ", "N ", "N ", "N ", "N...
\end{verbatim}

\hypertarget{mbta-ridership-data}{%
\subsection{MBTA Ridership Data}\label{mbta-ridership-data}}

Data Cleaning of messy MBTA Ridership Data

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{#url_mbta <- 'http://s3.amazonaws.com/assets.datacamp.com/production/course_1294/datasets/mbta.xlsx'}
\CommentTok{#download.file(url_mbta, 'mbta.xlsx')}
\NormalTok{mbta <-}\StringTok{ }\KeywordTok{read_excel}\NormalTok{(}\StringTok{'mbta.xlsx'}\NormalTok{, }\DataTypeTok{skip=}\DecValTok{1}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## New names:
## * `` -> ...1
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{glimpse}\NormalTok{(mbta)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 11
## Variables: 60
## $ ...1      <dbl> 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11
## $ mode      <chr> "All Modes by Qtr", "Boat", "Bus", "Commuter Rail", "Heav...
## $ `2007-01` <chr> "NA", "4", "335.819", "142.2", "435.294", "227.231", "0.0...
## $ `2007-02` <chr> "NA", "3.6", "338.675", "138.5", "448.271", "240.262", "-...
## $ `2007-03` <dbl> 1187.653, 40.000, 339.867, 137.700, 458.583, 241.444, 0.1...
## $ `2007-04` <chr> "NA", "4.3", "352.162", "139.5", "472.201", "255.557", "-...
## $ `2007-05` <chr> "NA", "4.9", "354.367", "139", "474.579", "248.262", "0.0...
## $ `2007-06` <dbl> 1245.959, 5.800, 350.543, 143.000, 477.032, 246.108, 0.09...
## $ `2007-07` <chr> "NA", "6.521", "357.519", "142.391", "471.735", "243.286"...
## $ `2007-08` <chr> "NA", "6.572", "355.479", "142.364", "461.605", "234.907"...
## $ `2007-09` <dbl> 1256.571, 5.469, 372.598, 143.051, 499.566, 265.748, -0.0...
## $ `2007-10` <chr> "NA", "5.145", "368.847", "146.542", "457.741", "241.434"...
## $ `2007-11` <chr> "NA", "3.763", "330.826", "145.089", "488.348", "250.497"...
## $ `2007-12` <dbl> 1216.890, 2.985, 312.920, 141.585, 448.268, 233.379, -0.0...
## $ `2008-01` <chr> "NA", "3.175", "340.324", "142.145", "472.624", "241.223"...
## $ `2008-02` <chr> "NA", "3.111", "352.905", "142.607", "492.1", "249.306", ...
## $ `2008-03` <dbl> 1253.522, 3.512, 361.155, 137.453, 494.046, 253.132, 0.05...
## $ `2008-04` <chr> "NA", "4.164", "368.189", "140.389", "513.204", "271.07",...
## $ `2008-05` <chr> "NA", "4.015", "363.903", "142.585", "507.952", "258.351"...
## $ `2008-06` <dbl> 1314.821, 5.189, 362.962, 142.057, 518.349, 266.961, 0.06...
## $ `2008-07` <chr> "NA", "6.016", "370.921", "145.731", "512.309", "270.158"...
## $ `2008-08` <chr> "NA", "5.8", "361.057", "144.565", "476.99", "239.344", "...
## $ `2008-09` <dbl> 1307.041, 4.587, 389.537, 141.907, 517.324, 258.171, 0.02...
## $ `2008-10` <chr> "NA", "4.285", "357.974", "151.957", "523.644", "250.063"...
## $ `2008-11` <chr> "NA", "3.488", "345.423", "152.952", "487.115", "232.068"...
## $ `2008-12` <dbl> 1232.655, 3.007, 325.767, 140.810, 446.743, 205.420, -0.0...
## $ `2009-01` <chr> "NA", "3.014", "338.532", "141.448", "461.004", "215.66",...
## $ `2009-02` <chr> "NA", "3.196", "360.412", "143.529", "482.407", "228.737"...
## $ `2009-03` <dbl> 1209.792, 3.330, 353.686, 142.893, 467.224, 222.844, -0.0...
## $ `2009-04` <chr> "NA", "4.049", "359.38", "142.34", "493.152", "238.232", ...
## $ `2009-05` <chr> "NA", "4.119", "354.75", "144.225", "475.634", "224.962",...
## $ `2009-06` <dbl> 1233.085, 4.900, 347.865, 142.006, 473.099, 226.259, -0.0...
## $ `2009-07` <chr> "NA", "6.444", "339.477", "137.691", "470.828", "230.308"...
## $ `2009-08` <chr> "NA", "5.903", "332.661", "139.158", "466.676", "231.783"...
## $ `2009-09` <dbl> 1230.461, 4.696, 374.260, 139.087, 500.403, 250.922, -0.0...
## $ `2009-10` <chr> "NA", "4.212", "385.868", "137.104", "513.406", "230.739"...
## $ `2009-11` <chr> "NA", "3.576", "366.98", "129.343", "480.278", "214.711",...
## $ `2009-12` <dbl> 1207.845, 3.113, 332.394, 126.066, 440.925, 194.446, -0.0...
## $ `2010-01` <chr> "NA", "3.207", "362.226", "130.91", "464.069", "204.396",...
## $ `2010-02` <chr> "NA", "3.195", "361.138", "131.918", "480.121", "213.136"...
## $ `2010-03` <dbl> 1208.857, 3.481, 373.443, 131.252, 483.397, 211.693, 0.01...
## $ `2010-04` <chr> "NA", "4.452", "378.611", "131.722", "502.374", "227.246"...
## $ `2010-05` <chr> "NA", "4.415", "380.171", "128.8", "487.4", "217.805", "0...
## $ `2010-06` <dbl> 1244.409, 5.411, 363.275, 129.144, 490.263, 215.922, 0.00...
## $ `2010-07` <chr> "NA", "6.513", "353.04", "122.935", "488.587", "218.729",...
## $ `2010-08` <chr> "NA", "6.269", "343.688", "129.732", "473.731", "210.53",...
## $ `2010-09` <dbl> 1225.527, 4.699, 381.622, 132.892, 521.099, 236.368, 0.00...
## $ `2010-10` <chr> "NA", "4.402", "384.987", "131.033", "532.403", "236.366"...
## $ `2010-11` <chr> "NA", "3.731", "367.955", "130.889", "502.887", "221.881"...
## $ `2010-12` <dbl> 1216.262, 3.156, 326.338, 121.422, 450.433, 196.211, -0.0...
## $ `2011-01` <chr> "NA", "3.14", "334.958", "128.396", "468.418", "198.45", ...
## $ `2011-02` <chr> "NA", "3.284", "346.234", "125.463", "504.068", "219.886"...
## $ `2011-03` <dbl> 1223.452, 3.674, 380.399, 134.374, 516.730, 227.935, 0.05...
## $ `2011-04` <chr> "NA", "4.251", "380.446", "134.169", "528.631", "242.28",...
## $ `2011-05` <chr> "NA", "4.431", "385.289", "136.14", "528.122", "225.776",...
## $ `2011-06` <dbl> 1302.414, 5.474, 376.317, 135.581, 529.528, 221.865, 0.05...
## $ `2011-07` <chr> "NA", "6.581", "361.585", "132.41", "532.888", "231.01", ...
## $ `2011-08` <chr> "NA", "6.733", "353.793", "130.616", "508.145", "220.164"...
## $ `2011-09` <dbl> 1290.549, 5.003, 388.271, 136.901, 550.137, 244.949, 0.04...
## $ `2011-10` <chr> "NA", "4.484", "398.456", "128.72", "554.932", "237.768",...
\end{verbatim}

\hypertarget{remove-unnecesary-rows-and-columns}{%
\subsubsection{Remove unnecesary rows and
columns}\label{remove-unnecesary-rows-and-columns}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{# Remove rows unuseful data}
\NormalTok{keep <-}\StringTok{ }\OperatorTok{!}\NormalTok{(mbta}\OperatorTok{$}\NormalTok{mode }\OperatorTok{%in%}\StringTok{ }\KeywordTok{c}\NormalTok{(}\StringTok{'All Modes by Qtr'}\NormalTok{, }\StringTok{'Pct Chg / Yr'}\NormalTok{, }\StringTok{'TOTAL'}\NormalTok{))}

\NormalTok{mbta2 <-}\StringTok{ }\NormalTok{mbta[keep,]}
\NormalTok{mbta3 <-}\StringTok{ }\NormalTok{mbta2[,}\OperatorTok{-}\DecValTok{1}\NormalTok{]}
\KeywordTok{glimpse}\NormalTok{(mbta3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 8
## Variables: 59
## $ mode      <chr> "Boat", "Bus", "Commuter Rail", "Heavy Rail", "Light Rail...
## $ `2007-01` <chr> "4", "335.819", "142.2", "435.294", "227.231", "4.772", "...
## $ `2007-02` <chr> "3.6", "338.675", "138.5", "448.271", "240.262", "4.417",...
## $ `2007-03` <dbl> 40.000, 339.867, 137.700, 458.583, 241.444, 4.574, 5.500,...
## $ `2007-04` <chr> "4.3", "352.162", "139.5", "472.201", "255.557", "4.542",...
## $ `2007-05` <chr> "4.9", "354.367", "139", "474.579", "248.262", "4.768", "...
## $ `2007-06` <dbl> 5.800, 350.543, 143.000, 477.032, 246.108, 4.722, 5.600, ...
## $ `2007-07` <chr> "6.521", "357.519", "142.391", "471.735", "243.286", "3.9...
## $ `2007-08` <chr> "6.572", "355.479", "142.364", "461.605", "234.907", "3.9...
## $ `2007-09` <dbl> 5.469, 372.598, 143.051, 499.566, 265.748, 4.329, 5.609, ...
## $ `2007-10` <chr> "5.145", "368.847", "146.542", "457.741", "241.434", "4.3...
## $ `2007-11` <chr> "3.763", "330.826", "145.089", "488.348", "250.497", "4.0...
## $ `2007-12` <dbl> 2.985, 312.920, 141.585, 448.268, 233.379, 3.708, 5.062, ...
## $ `2008-01` <chr> "3.175", "340.324", "142.145", "472.624", "241.223", "4.1...
## $ `2008-02` <chr> "3.111", "352.905", "142.607", "492.1", "249.306", "4.079...
## $ `2008-03` <dbl> 3.512, 361.155, 137.453, 494.046, 253.132, 4.175, 6.164, ...
## $ `2008-04` <chr> "4.164", "368.189", "140.389", "513.204", "271.07", "4.14...
## $ `2008-05` <chr> "4.015", "363.903", "142.585", "507.952", "258.351", "4.0...
## $ `2008-06` <dbl> 5.189, 362.962, 142.057, 518.349, 266.961, 4.400, 6.294, ...
## $ `2008-07` <chr> "6.016", "370.921", "145.731", "512.309", "270.158", "4.5...
## $ `2008-08` <chr> "5.8", "361.057", "144.565", "476.99", "239.344", "4.286"...
## $ `2008-09` <dbl> 4.587, 389.537, 141.907, 517.324, 258.171, 4.878, 6.503, ...
## $ `2008-10` <chr> "4.285", "357.974", "151.957", "523.644", "250.063", "4.5...
## $ `2008-11` <chr> "3.488", "345.423", "152.952", "487.115", "232.068", "4.3...
## $ `2008-12` <dbl> 3.007, 325.767, 140.810, 446.743, 205.420, 3.420, 5.957, ...
## $ `2009-01` <chr> "3.014", "338.532", "141.448", "461.004", "215.66", "3.58...
## $ `2009-02` <chr> "3.196", "360.412", "143.529", "482.407", "228.737", "3.6...
## $ `2009-03` <dbl> 3.330, 353.686, 142.893, 467.224, 222.844, 2.586, 6.675, ...
## $ `2009-04` <chr> "4.049", "359.38", "142.34", "493.152", "238.232", "2.824...
## $ `2009-05` <chr> "4.119", "354.75", "144.225", "475.634", "224.962", "2.73...
## $ `2009-06` <dbl> 4.900, 347.865, 142.006, 473.099, 226.259, 2.763, 6.790, ...
## $ `2009-07` <chr> "6.444", "339.477", "137.691", "470.828", "230.308", "2.6...
## $ `2009-08` <chr> "5.903", "332.661", "139.158", "466.676", "231.783", "2.5...
## $ `2009-09` <dbl> 4.696, 374.260, 139.087, 500.403, 250.922, 2.716, 6.690, ...
## $ `2009-10` <chr> "4.212", "385.868", "137.104", "513.406", "230.739", "2.5...
## $ `2009-11` <chr> "3.576", "366.98", "129.343", "480.278", "214.711", "2.72...
## $ `2009-12` <dbl> 3.113, 332.394, 126.066, 440.925, 194.446, 2.365, 6.454, ...
## $ `2010-01` <chr> "3.207", "362.226", "130.91", "464.069", "204.396", "2.68...
## $ `2010-02` <chr> "3.195", "361.138", "131.918", "480.121", "213.136", "2.4...
## $ `2010-03` <dbl> 3.481, 373.443, 131.252, 483.397, 211.693, 2.550, 7.066, ...
## $ `2010-04` <chr> "4.452", "378.611", "131.722", "502.374", "227.246", "2.6...
## $ `2010-05` <chr> "4.415", "380.171", "128.8", "487.4", "217.805", "2.686",...
## $ `2010-06` <dbl> 5.411, 363.275, 129.144, 490.263, 215.922, 2.646, 7.460, ...
## $ `2010-07` <chr> "6.513", "353.04", "122.935", "488.587", "218.729", "2.54...
## $ `2010-08` <chr> "6.269", "343.688", "129.732", "473.731", "210.53", "2.43...
## $ `2010-09` <dbl> 4.699, 381.622, 132.892, 521.099, 236.368, 2.652, 7.349, ...
## $ `2010-10` <chr> "4.402", "384.987", "131.033", "532.403", "236.366", "2.6...
## $ `2010-11` <chr> "3.731", "367.955", "130.889", "502.887", "221.881", "2.5...
## $ `2010-12` <dbl> 3.156, 326.338, 121.422, 450.433, 196.211, 2.379, 7.199, ...
## $ `2011-01` <chr> "3.14", "334.958", "128.396", "468.418", "198.45", "2.213...
## $ `2011-02` <chr> "3.284", "346.234", "125.463", "504.068", "219.886", "2.5...
## $ `2011-03` <dbl> 3.674, 380.399, 134.374, 516.730, 227.935, 2.559, 8.387, ...
## $ `2011-04` <chr> "4.251", "380.446", "134.169", "528.631", "242.28", "2.76...
## $ `2011-05` <chr> "4.431", "385.289", "136.14", "528.122", "225.776", "2.77...
## $ `2011-06` <dbl> 5.474, 376.317, 135.581, 529.528, 221.865, 2.815, 8.377, ...
## $ `2011-07` <chr> "6.581", "361.585", "132.41", "532.888", "231.01", "2.671...
## $ `2011-08` <chr> "6.733", "353.793", "130.616", "508.145", "220.164", "2.6...
## $ `2011-09` <dbl> 5.003, 388.271, 136.901, 550.137, 244.949, 2.843, 8.318, ...
## $ `2011-10` <chr> "4.484", "398.456", "128.72", "554.932", "237.768", "2.96...
\end{verbatim}

\hypertarget{restructuring-the-data}{%
\subsubsection{Restructuring the data}\label{restructuring-the-data}}

The table is stored backwards, we should restructure it to improve
readability

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mbta4 <-}\StringTok{ }\KeywordTok{gather}\NormalTok{(mbta3, month, thou_riders, }\OperatorTok{-}\NormalTok{mode)}
\CommentTok{#change character to numeric data}
\NormalTok{mbta4}\OperatorTok{$}\NormalTok{thou_riders <-}\StringTok{ }\KeywordTok{as.numeric}\NormalTok{(mbta4}\OperatorTok{$}\NormalTok{thou_riders)}
\NormalTok{mbta5 <-}\StringTok{ }\KeywordTok{spread}\NormalTok{(mbta4, mode, thou_riders)}
\KeywordTok{glimpse}\NormalTok{(mbta5)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 58
## Variables: 9
## $ month               <chr> "2007-01", "2007-02", "2007-03", "2007-04", "20...
## $ Boat                <dbl> 4.000, 3.600, 40.000, 4.300, 4.900, 5.800, 6.52...
## $ Bus                 <dbl> 335.819, 338.675, 339.867, 352.162, 354.367, 35...
## $ `Commuter Rail`     <dbl> 142.200, 138.500, 137.700, 139.500, 139.000, 14...
## $ `Heavy Rail`        <dbl> 435.294, 448.271, 458.583, 472.201, 474.579, 47...
## $ `Light Rail`        <dbl> 227.231, 240.262, 241.444, 255.557, 248.262, 24...
## $ `Private Bus`       <dbl> 4.772, 4.417, 4.574, 4.542, 4.768, 4.722, 3.936...
## $ RIDE                <dbl> 4.900, 5.000, 5.500, 5.400, 5.400, 5.600, 5.253...
## $ `Trackless Trolley` <dbl> 12.757, 12.913, 13.057, 13.444, 13.479, 13.323,...
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{head}\NormalTok{(mbta5)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 9
##   month  Boat   Bus `Commuter Rail` `Heavy Rail` `Light Rail` `Private Bus`
##   <chr> <dbl> <dbl>           <dbl>        <dbl>        <dbl>         <dbl>
## 1 2007~   4    336.            142.         435.         227.          4.77
## 2 2007~   3.6  339.            138.         448.         240.          4.42
## 3 2007~  40    340.            138.         459.         241.          4.57
## 4 2007~   4.3  352.            140.         472.         256.          4.54
## 5 2007~   4.9  354.            139          475.         248.          4.77
## 6 2007~   5.8  351.            143          477.         246.          4.72
## # ... with 2 more variables: RIDE <dbl>, `Trackless Trolley` <dbl>
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mbta6 <-}\StringTok{ }\KeywordTok{separate}\NormalTok{(mbta5, month, }\KeywordTok{c}\NormalTok{(}\StringTok{'year'}\NormalTok{, }\StringTok{'month'}\NormalTok{))}

\KeywordTok{head}\NormalTok{(mbta6)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## # A tibble: 6 x 10
##   year  month  Boat   Bus `Commuter Rail` `Heavy Rail` `Light Rail`
##   <chr> <chr> <dbl> <dbl>           <dbl>        <dbl>        <dbl>
## 1 2007  01      4    336.            142.         435.         227.
## 2 2007  02      3.6  339.            138.         448.         240.
## 3 2007  03     40    340.            138.         459.         241.
## 4 2007  04      4.3  352.            140.         472.         256.
## 5 2007  05      4.9  354.            139          475.         248.
## 6 2007  06      5.8  351.            143          477.         246.
## # ... with 3 more variables: `Private Bus` <dbl>, RIDE <dbl>, `Trackless
## #   Trolley` <dbl>
\end{verbatim}

\hypertarget{data-entry-error}{%
\subsubsection{Data entry error}\label{data-entry-error}}

Thre seems to be an entry error in boat

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{summary}\NormalTok{(mbta6)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
##      year              month                Boat             Bus       
##  Length:58          Length:58          Min.   : 2.985   Min.   :312.9  
##  Class :character   Class :character   1st Qu.: 3.494   1st Qu.:345.6  
##  Mode  :character   Mode  :character   Median : 4.293   Median :359.9  
##                                        Mean   : 5.068   Mean   :358.6  
##                                        3rd Qu.: 5.356   3rd Qu.:372.2  
##                                        Max.   :40.000   Max.   :398.5  
##  Commuter Rail     Heavy Rail      Light Rail     Private Bus   
##  Min.   :121.4   Min.   :435.3   Min.   :194.4   Min.   :2.213  
##  1st Qu.:131.4   1st Qu.:471.1   1st Qu.:220.6   1st Qu.:2.641  
##  Median :138.8   Median :487.3   Median :231.9   Median :2.820  
##  Mean   :137.4   Mean   :489.3   Mean   :233.0   Mean   :3.352  
##  3rd Qu.:142.4   3rd Qu.:511.3   3rd Qu.:244.5   3rd Qu.:4.167  
##  Max.   :153.0   Max.   :554.9   Max.   :271.1   Max.   :4.878  
##       RIDE       Trackless Trolley
##  Min.   :4.900   Min.   : 5.777   
##  1st Qu.:5.965   1st Qu.:11.679   
##  Median :6.615   Median :12.598   
##  Mean   :6.604   Mean   :12.125   
##  3rd Qu.:7.149   3rd Qu.:13.320   
##  Max.   :8.598   Max.   :15.109
\end{verbatim}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{hist}\NormalTok{(mbta6}\OperatorTok{$}\NormalTok{Boat)}
\end{Highlighting}
\end{Shaded}

\includegraphics{example_files/figure-latex/entryerrormbta-1.pdf} Fixing
the error

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{i <-}\StringTok{ }\KeywordTok{which}\NormalTok{(mbta6}\OperatorTok{$}\NormalTok{Boat }\OperatorTok{==}\StringTok{ }\DecValTok{40}\NormalTok{)}


\NormalTok{mbta6}\OperatorTok{$}\NormalTok{Boat[i] <-}\StringTok{ }\DecValTok{4}


\KeywordTok{hist}\NormalTok{(mbta6}\OperatorTok{$}\NormalTok{Boat)}
\end{Highlighting}
\end{Shaded}

\includegraphics{example_files/figure-latex/entryerror-1.pdf}

\hypertarget{plot-the-data}{%
\subsubsection{Plot the data}\label{plot-the-data}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{mbta_all <-}\StringTok{ }\NormalTok{mbta6 }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{unite}\NormalTok{(year_mon, year, month, }\DataTypeTok{sep =} \StringTok{""}\NormalTok{) }\OperatorTok{%>%}
\StringTok{  }\KeywordTok{gather}\NormalTok{(mode, thou_riders, }\OperatorTok{-}\NormalTok{year_mon)}

\KeywordTok{ggplot}\NormalTok{(mbta_all, }\KeywordTok{aes}\NormalTok{(}\DataTypeTok{x =}\NormalTok{ year_mon, }\DataTypeTok{y =}\NormalTok{ thou_riders, }\DataTypeTok{col =}\NormalTok{ mode)) }\OperatorTok{+}\StringTok{ }\KeywordTok{geom_point}\NormalTok{() }\OperatorTok{+}\StringTok{ }
\StringTok{  }\KeywordTok{scale_x_discrete}\NormalTok{(}\DataTypeTok{name =} \StringTok{"Month"}\NormalTok{, }\DataTypeTok{breaks =} \KeywordTok{c}\NormalTok{(}\DecValTok{200701}\NormalTok{, }\DecValTok{200801}\NormalTok{, }\DecValTok{200901}\NormalTok{, }\DecValTok{201001}\NormalTok{, }\DecValTok{201101}\NormalTok{)) }\OperatorTok{+}\StringTok{  }
\StringTok{  }\KeywordTok{scale_y_continuous}\NormalTok{(}\DataTypeTok{name =} \StringTok{"Avg Weekday Ridership (thousands)"}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\includegraphics{example_files/figure-latex/plottingmbta-1.pdf}

\hypertarget{world-food-facts-sales-dataset}{%
\subsection{World Food Facts Sales
Dataset}\label{world-food-facts-sales-dataset}}

Data Cleaning of messy World Food Facts

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{url_food <-}\StringTok{ 'http://s3.amazonaws.com/assets.datacamp.com/production/course_1294/datasets/food.csv'}
\NormalTok{food <-}\StringTok{ }\KeywordTok{fread}\NormalTok{(url_food)}

\NormalTok{food <-}\StringTok{ }\KeywordTok{data.frame}\NormalTok{(food)}
\KeywordTok{glimpse}\NormalTok{(food)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 1,500
## Variables: 160
## $ V1                                         <int> 1, 2, 3, 4, 5, 6, 7, 8, ...
## $ code                                       <int> 100030, 100050, 100079, ...
## $ url                                        <chr> "http://world-en.openfoo...
## $ creator                                    <chr> "sebleouf", "foodorigins...
## $ created_t                                  <int> 1424747544, 1450316429, ...
## $ created_datetime                           <chr> "2015-02-24T03:12:24Z", ...
## $ last_modified_t                            <int> 1438445887, 1450817956, ...
## $ last_modified_datetime                     <chr> "2015-08-01T16:18:07Z", ...
## $ product_name                               <chr> "Confiture de fraise fra...
## $ generic_name                               <chr> "", "", "PÃ¢tes de fruit...
## $ quantity                                   <chr> "265 g", "375g", "1 kg",...
## $ packaging                                  <chr> "Bocal,Verre", "Plastic,...
## $ packaging_tags                             <chr> "bocal,verre", "plastic,...
## $ brands                                     <chr> "Casino DÃ©lices", "Guyl...
## $ brands_tags                                <chr> "casino-delices", "guyli...
## $ categories                                 <chr> "Aliments et boissons Ã ...
## $ categories_tags                            <chr> "en:plant-based-foods-an...
## $ categories_en                              <chr> "Plant-based foods and b...
## $ origins                                    <chr> "", "", "", "", "Argenti...
## $ origins_tags                               <chr> "", "", "", "", "argenti...
## $ manufacturing_places                       <chr> "France", "Belgium", "",...
## $ manufacturing_places_tags                  <chr> "france", "belgium", "",...
## $ labels                                     <chr> "", "", "", "Vegetariano...
## $ labels_tags                                <chr> "", "", "", "en:vegetari...
## $ labels_en                                  <chr> "", "", "", "Vegetarian,...
## $ emb_codes                                  <chr> "EMB 78015", "", "", "",...
## $ emb_codes_tags                             <chr> "emb-78015", "", "", "",...
## $ first_packaging_code_geo                   <chr> "48.983333,2.066667", ""...
## $ cities                                     <lgl> NA, NA, NA, NA, NA, NA, ...
## $ cities_tags                                <chr> "andresy-yvelines-france...
## $ purchase_places                            <chr> "Lyon,France", "NSW,Aust...
## $ stores                                     <chr> "Casino", "", "", "El Co...
## $ countries                                  <chr> "France", "Australia", "...
## $ countries_tags                             <chr> "en:france", "en:austral...
## $ countries_en                               <chr> "France", "Australia", "...
## $ ingredients_text                           <chr> "Sucre de canne, fraises...
## $ allergens                                  <chr> "", "", "", "", "", "", ...
## $ allergens_en                               <lgl> NA, NA, NA, NA, NA, NA, ...
## $ traces                                     <chr> "Lait,Fruits Ã  coque", ...
## $ traces_tags                                <chr> "en:milk,en:nuts", "", "...
## $ traces_en                                  <chr> "Milk,Nuts", "", "", "",...
## $ serving_size                               <chr> "15 g", "", "", "", "", ...
## $ no_nutriments                              <lgl> NA, NA, NA, NA, NA, NA, ...
## $ additives_n                                <int> 1, NA, 2, 5, 0, NA, NA, ...
## $ additives                                  <chr> "[ sucre-de-canne -> fr:...
## $ additives_tags                             <chr> "en:e440", "", "en:e440,...
## $ additives_en                               <chr> "E440 - Pectins", "", "E...
## $ ingredients_from_palm_oil_n                <int> 0, NA, 0, 0, 0, NA, NA, ...
## $ ingredients_from_palm_oil                  <lgl> NA, NA, NA, NA, NA, NA, ...
## $ ingredients_from_palm_oil_tags             <chr> "", "", "", "", "", "", ...
## $ ingredients_that_may_be_from_palm_oil_n    <int> 0, NA, 0, 1, 0, NA, NA, ...
## $ ingredients_that_may_be_from_palm_oil      <lgl> NA, NA, NA, NA, NA, NA, ...
## $ ingredients_that_may_be_from_palm_oil_tags <chr> "", "", "", "e471-mono-e...
## $ nutrition_grade_uk                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ nutrition_grade_fr                         <chr> "d", "", "", "d", "d", "...
## $ pnns_groups_1                              <chr> "Sugary snacks", "Sugary...
## $ pnns_groups_2                              <chr> "Sweets", "Chocolate pro...
## $ states                                     <chr> "en:to-be-checked, en:co...
## $ states_tags                                <chr> "en:to-be-checked,en:com...
## $ states_en                                  <chr> "To be checked,Complete,...
## $ main_category                              <chr> "en:plant-based-foods-an...
## $ main_category_en                           <chr> "Plant-based foods and b...
## $ image_url                                  <chr> "http://en.openfoodfacts...
## $ image_small_url                            <chr> "http://en.openfoodfacts...
## $ energy_100g                                <dbl> 918, NA, NA, 766, 2359, ...
## $ energy_from_fat_100g                       <dbl> NA, NA, NA, NA, NA, NA, ...
## $ fat_100g                                   <dbl> 0.00, NA, NA, 16.70, 45....
## $ saturated_fat_100g                         <dbl> 0.000, NA, NA, 9.900, 5....
## $ butyric_acid_100g                          <lgl> NA, NA, NA, NA, NA, NA, ...
## $ caproic_acid_100g                          <lgl> NA, NA, NA, NA, NA, NA, ...
## $ caprylic_acid_100g                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ capric_acid_100g                           <lgl> NA, NA, NA, NA, NA, NA, ...
## $ lauric_acid_100g                           <lgl> NA, NA, NA, NA, NA, NA, ...
## $ myristic_acid_100g                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ palmitic_acid_100g                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ stearic_acid_100g                          <lgl> NA, NA, NA, NA, NA, NA, ...
## $ arachidic_acid_100g                        <lgl> NA, NA, NA, NA, NA, NA, ...
## $ behenic_acid_100g                          <lgl> NA, NA, NA, NA, NA, NA, ...
## $ lignoceric_acid_100g                       <lgl> NA, NA, NA, NA, NA, NA, ...
## $ cerotic_acid_100g                          <lgl> NA, NA, NA, NA, NA, NA, ...
## $ montanic_acid_100g                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ melissic_acid_100g                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ monounsaturated_fat_100g                   <dbl> NA, NA, NA, 2.9, 9.5, NA...
## $ polyunsaturated_fat_100g                   <dbl> NA, NA, NA, 3.9, 32.8, N...
## $ omega_3_fat_100g                           <dbl> NA, NA, NA, NA, NA, NA, ...
## $ alpha_linolenic_acid_100g                  <dbl> NA, NA, NA, NA, NA, NA, ...
## $ eicosapentaenoic_acid_100g                 <dbl> NA, NA, NA, NA, NA, NA, ...
## $ docosahexaenoic_acid_100g                  <dbl> NA, NA, NA, NA, NA, NA, ...
## $ omega_6_fat_100g                           <dbl> NA, NA, NA, NA, NA, NA, ...
## $ linoleic_acid_100g                         <dbl> NA, NA, NA, NA, NA, NA, ...
## $ arachidonic_acid_100g                      <lgl> NA, NA, NA, NA, NA, NA, ...
## $ gamma_linolenic_acid_100g                  <lgl> NA, NA, NA, NA, NA, NA, ...
## $ dihomo_gamma_linolenic_acid_100g           <lgl> NA, NA, NA, NA, NA, NA, ...
## $ omega_9_fat_100g                           <lgl> NA, NA, NA, NA, NA, NA, ...
## $ oleic_acid_100g                            <lgl> NA, NA, NA, NA, NA, NA, ...
## $ elaidic_acid_100g                          <lgl> NA, NA, NA, NA, NA, NA, ...
## $ gondoic_acid_100g                          <lgl> NA, NA, NA, NA, NA, NA, ...
## $ mead_acid_100g                             <lgl> NA, NA, NA, NA, NA, NA, ...
## $ erucic_acid_100g                           <lgl> NA, NA, NA, NA, NA, NA, ...
## $ nervonic_acid_100g                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ trans_fat_100g                             <dbl> NA, NA, NA, NA, NA, NA, ...
## $ cholesterol_100g                           <dbl> NA, NA, NA, 0.00020, NA,...
## $ carbohydrates_100g                         <dbl> 54.00, NA, NA, 5.70, 17....
## $ sugars_100g                                <dbl> 54.00, NA, NA, 4.20, 2.7...
## $ sucrose_100g                               <lgl> NA, NA, NA, NA, NA, NA, ...
## $ glucose_100g                               <lgl> NA, NA, NA, NA, NA, NA, ...
## $ fructose_100g                              <int> NA, NA, NA, NA, NA, NA, ...
## $ lactose_100g                               <dbl> NA, NA, NA, NA, NA, NA, ...
## $ maltose_100g                               <lgl> NA, NA, NA, NA, NA, NA, ...
## $ maltodextrins_100g                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ starch_100g                                <dbl> NA, NA, NA, NA, NA, NA, ...
## $ polyols_100g                               <dbl> NA, NA, NA, NA, NA, NA, ...
## $ fiber_100g                                 <dbl> NA, NA, NA, 0.2, 9.0, NA...
## $ proteins_100g                              <dbl> 0.00, NA, NA, 2.90, 18.2...
## $ casein_100g                                <dbl> NA, NA, NA, NA, NA, NA, ...
## $ serum_proteins_100g                        <lgl> NA, NA, NA, NA, NA, NA, ...
## $ nucleotides_100g                           <lgl> NA, NA, NA, NA, NA, NA, ...
## $ salt_100g                                  <dbl> 0.0000000, NA, NA, 0.050...
## $ sodium_100g                                <dbl> 0.00000000, NA, NA, 0.02...
## $ alcohol_100g                               <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_a_100g                             <dbl> NA, NA, NA, NA, NA, NA, ...
## $ beta_carotene_100g                         <lgl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_d_100g                             <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_e_100g                             <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_k_100g                             <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_c_100g                             <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_b1_100g                            <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_b2_100g                            <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_pp_100g                            <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_b6_100g                            <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_b9_100g                            <dbl> NA, NA, NA, NA, NA, NA, ...
## $ vitamin_b12_100g                           <dbl> NA, NA, NA, NA, NA, NA, ...
## $ biotin_100g                                <dbl> NA, NA, NA, NA, NA, NA, ...
## $ pantothenic_acid_100g                      <dbl> NA, NA, NA, NA, NA, NA, ...
## $ silica_100g                                <dbl> NA, NA, NA, NA, NA, NA, ...
## $ bicarbonate_100g                           <dbl> NA, NA, NA, NA, NA, NA, ...
## $ potassium_100g                             <dbl> NA, NA, NA, NA, NA, NA, ...
## $ chloride_100g                              <dbl> NA, NA, NA, NA, NA, NA, ...
## $ calcium_100g                               <dbl> NA, NA, NA, NA, NA, NA, ...
## $ phosphorus_100g                            <dbl> NA, NA, NA, NA, 1.155, N...
## $ iron_100g                                  <dbl> NA, NA, NA, NA, 0.00380,...
## $ magnesium_100g                             <dbl> NA, NA, NA, NA, 0.129, N...
## $ zinc_100g                                  <dbl> NA, NA, NA, NA, NA, NA, ...
## $ copper_100g                                <dbl> NA, NA, NA, NA, NA, NA, ...
## $ manganese_100g                             <dbl> NA, NA, NA, NA, NA, NA, ...
## $ fluoride_100g                              <dbl> NA, NA, NA, NA, NA, NA, ...
## $ selenium_100g                              <dbl> NA, NA, NA, NA, NA, NA, ...
## $ chromium_100g                              <lgl> NA, NA, NA, NA, NA, NA, ...
## $ molybdenum_100g                            <lgl> NA, NA, NA, NA, NA, NA, ...
## $ iodine_100g                                <dbl> NA, NA, NA, NA, NA, NA, ...
## $ caffeine_100g                              <lgl> NA, NA, NA, NA, NA, NA, ...
## $ taurine_100g                               <lgl> NA, NA, NA, NA, NA, NA, ...
## $ ph_100g                                    <lgl> NA, NA, NA, NA, NA, NA, ...
## $ fruits_vegetables_nuts_100g                <dbl> 54, NA, NA, NA, NA, NA, ...
## $ collagen_meat_protein_ratio_100g           <int> NA, NA, NA, NA, NA, NA, ...
## $ cocoa_100g                                 <int> NA, NA, NA, NA, NA, NA, ...
## $ chlorophyl_100g                            <lgl> NA, NA, NA, NA, NA, NA, ...
## $ carbon_footprint_100g                      <dbl> NA, NA, NA, NA, NA, NA, ...
## $ nutrition_score_fr_100g                    <int> 11, NA, NA, 11, 17, NA, ...
## $ nutrition_score_uk_100g                    <int> 11, NA, NA, 11, 17, NA, ...
\end{verbatim}

\hypertarget{remove-duplicate-and-useless-info}{%
\subsubsection{Remove duplicate and useless
info}\label{remove-duplicate-and-useless-info}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{duplicates <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{4}\NormalTok{, }\DecValTok{6}\NormalTok{, }\DecValTok{11}\NormalTok{, }\DecValTok{13}\NormalTok{, }\DecValTok{15}\NormalTok{, }\DecValTok{17}\NormalTok{, }\DecValTok{18}\NormalTok{, }\DecValTok{20}\NormalTok{, }\DecValTok{22}\NormalTok{, }
                \DecValTok{24}\NormalTok{, }\DecValTok{25}\NormalTok{, }\DecValTok{28}\NormalTok{, }\DecValTok{32}\NormalTok{, }\DecValTok{34}\NormalTok{, }\DecValTok{36}\NormalTok{, }\DecValTok{38}\NormalTok{, }\DecValTok{40}\NormalTok{, }
                \DecValTok{44}\NormalTok{, }\DecValTok{46}\NormalTok{, }\DecValTok{48}\NormalTok{, }\DecValTok{51}\NormalTok{, }\DecValTok{54}\NormalTok{, }\DecValTok{65}\NormalTok{, }\DecValTok{158}\NormalTok{)}

\NormalTok{food2 <-}\StringTok{ }\NormalTok{food[,}\OperatorTok{-}\NormalTok{duplicates]}

\NormalTok{useless <-}\StringTok{ }\KeywordTok{c}\NormalTok{(}\DecValTok{1}\NormalTok{, }\DecValTok{2}\NormalTok{, }\DecValTok{3}\NormalTok{, }\DecValTok{32}\OperatorTok{:}\DecValTok{41}\NormalTok{)}
\NormalTok{food3 <-}\StringTok{ }\NormalTok{food2[,}\OperatorTok{-}\NormalTok{useless]}
\KeywordTok{glimpse}\NormalTok{(food3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 1,500
## Variables: 123
## $ created_t                             <int> 1424747544, 1450316429, 14286...
## $ last_modified_t                       <int> 1438445887, 1450817956, 14287...
## $ last_modified_datetime                <chr> "2015-08-01T16:18:07Z", "2015...
## $ product_name                          <chr> "Confiture de fraise fraise d...
## $ generic_name                          <chr> "", "", "PÃ¢tes de fruits", "...
## $ packaging                             <chr> "Bocal,Verre", "Plastic,Box",...
## $ brands                                <chr> "Casino DÃ©lices", "Guylian",...
## $ categories                            <chr> "Aliments et boissons Ã  base...
## $ origins                               <chr> "", "", "", "", "Argentina", ...
## $ manufacturing_places                  <chr> "France", "Belgium", "", "Ita...
## $ labels                                <chr> "", "", "", "Vegetariano,Vega...
## $ emb_codes                             <chr> "EMB 78015", "", "", "", "ES ...
## $ emb_codes_tags                        <chr> "emb-78015", "", "", "", "es-...
## $ cities                                <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ cities_tags                           <chr> "andresy-yvelines-france", ""...
## $ purchase_places                       <chr> "Lyon,France", "NSW,Australia...
## $ countries                             <chr> "France", "Australia", "Franc...
## $ countries_en                          <chr> "France", "Australia", "Franc...
## $ allergens                             <chr> "", "", "", "", "", "", "", "...
## $ traces                                <chr> "Lait,Fruits Ã  coque", "", "...
## $ traces_en                             <chr> "Milk,Nuts", "", "", "", "Nut...
## $ serving_size                          <chr> "15 g", "", "", "", "", "", "...
## $ no_nutriments                         <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ additives                             <chr> "[ sucre-de-canne -> fr:sucre...
## $ additives_en                          <chr> "E440 - Pectins", "", "E440 -...
## $ ingredients_from_palm_oil             <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ ingredients_from_palm_oil_tags        <chr> "", "", "", "", "", "", "", "...
## $ ingredients_that_may_be_from_palm_oil <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ image_small_url                       <chr> "http://en.openfoodfacts.org/...
## $ energy_from_fat_100g                  <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ fat_100g                              <dbl> 0.00, NA, NA, 16.70, 45.50, N...
## $ saturated_fat_100g                    <dbl> 0.000, NA, NA, 9.900, 5.200, ...
## $ butyric_acid_100g                     <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ caproic_acid_100g                     <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ caprylic_acid_100g                    <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ capric_acid_100g                      <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ lauric_acid_100g                      <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ myristic_acid_100g                    <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ palmitic_acid_100g                    <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ stearic_acid_100g                     <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ arachidic_acid_100g                   <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ behenic_acid_100g                     <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ lignoceric_acid_100g                  <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ cerotic_acid_100g                     <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ montanic_acid_100g                    <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ melissic_acid_100g                    <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ monounsaturated_fat_100g              <dbl> NA, NA, NA, 2.9, 9.5, NA, NA,...
## $ polyunsaturated_fat_100g              <dbl> NA, NA, NA, 3.9, 32.8, NA, NA...
## $ omega_3_fat_100g                      <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ alpha_linolenic_acid_100g             <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ eicosapentaenoic_acid_100g            <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ docosahexaenoic_acid_100g             <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ omega_6_fat_100g                      <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ linoleic_acid_100g                    <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ arachidonic_acid_100g                 <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ gamma_linolenic_acid_100g             <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ dihomo_gamma_linolenic_acid_100g      <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ omega_9_fat_100g                      <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ oleic_acid_100g                       <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ elaidic_acid_100g                     <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ gondoic_acid_100g                     <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ mead_acid_100g                        <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ erucic_acid_100g                      <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ nervonic_acid_100g                    <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ trans_fat_100g                        <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ cholesterol_100g                      <dbl> NA, NA, NA, 0.00020, NA, NA, ...
## $ carbohydrates_100g                    <dbl> 54.00, NA, NA, 5.70, 17.30, N...
## $ sugars_100g                           <dbl> 54.00, NA, NA, 4.20, 2.70, NA...
## $ sucrose_100g                          <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ glucose_100g                          <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ fructose_100g                         <int> NA, NA, NA, NA, NA, NA, NA, N...
## $ lactose_100g                          <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ maltose_100g                          <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ maltodextrins_100g                    <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ starch_100g                           <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ polyols_100g                          <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ fiber_100g                            <dbl> NA, NA, NA, 0.2, 9.0, NA, NA,...
## $ proteins_100g                         <dbl> 0.00, NA, NA, 2.90, 18.20, NA...
## $ casein_100g                           <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ serum_proteins_100g                   <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ nucleotides_100g                      <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ salt_100g                             <dbl> 0.0000000, NA, NA, 0.0508000,...
## $ sodium_100g                           <dbl> 0.00000000, NA, NA, 0.0200000...
## $ alcohol_100g                          <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_a_100g                        <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ beta_carotene_100g                    <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_d_100g                        <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_e_100g                        <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_k_100g                        <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_c_100g                        <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_b1_100g                       <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_b2_100g                       <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_pp_100g                       <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_b6_100g                       <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_b9_100g                       <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ vitamin_b12_100g                      <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ biotin_100g                           <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ pantothenic_acid_100g                 <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ silica_100g                           <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ bicarbonate_100g                      <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ potassium_100g                        <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ chloride_100g                         <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ calcium_100g                          <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ phosphorus_100g                       <dbl> NA, NA, NA, NA, 1.155, NA, NA...
## $ iron_100g                             <dbl> NA, NA, NA, NA, 0.00380, NA, ...
## $ magnesium_100g                        <dbl> NA, NA, NA, NA, 0.129, NA, NA...
## $ zinc_100g                             <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ copper_100g                           <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ manganese_100g                        <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ fluoride_100g                         <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ selenium_100g                         <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ chromium_100g                         <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ molybdenum_100g                       <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ iodine_100g                           <dbl> NA, NA, NA, NA, NA, NA, NA, N...
## $ caffeine_100g                         <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ taurine_100g                          <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ ph_100g                               <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ fruits_vegetables_nuts_100g           <dbl> 54, NA, NA, NA, NA, NA, NA, N...
## $ collagen_meat_protein_ratio_100g      <int> NA, NA, NA, NA, NA, NA, NA, N...
## $ cocoa_100g                            <int> NA, NA, NA, NA, NA, NA, NA, N...
## $ chlorophyl_100g                       <lgl> NA, NA, NA, NA, NA, NA, NA, N...
## $ nutrition_score_fr_100g               <int> 11, NA, NA, 11, 17, NA, NA, 1...
## $ nutrition_score_uk_100g               <int> 11, NA, NA, 11, 17, NA, NA, 1...
\end{verbatim}

\hypertarget{correct-missing-data-to-0}{%
\subsubsection{Correct missing data to
0}\label{correct-missing-data-to-0}}

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{i <-}\StringTok{ }\KeywordTok{sapply}\NormalTok{(food3, is.numeric) }\CommentTok{# Identify all numeric variables}
\NormalTok{food3[i] <-}\StringTok{ }\KeywordTok{lapply}\NormalTok{(food3[i], as.character) }
\NormalTok{food3[}\KeywordTok{is.na}\NormalTok{(food3)] <-}\StringTok{ }\DecValTok{0} \CommentTok{# Replace NA with 0}
\NormalTok{food3[i] <-}\StringTok{ }\KeywordTok{lapply}\NormalTok{(food3[i], as.factor) }
\KeywordTok{glimpse}\NormalTok{(food3)}
\end{Highlighting}
\end{Shaded}

\begin{verbatim}
## Observations: 1,500
## Variables: 123
## $ created_t                             <fct> 1424747544, 1450316429, 14286...
## $ last_modified_t                       <fct> 1438445887, 1450817956, 14287...
## $ last_modified_datetime                <chr> "2015-08-01T16:18:07Z", "2015...
## $ product_name                          <chr> "Confiture de fraise fraise d...
## $ generic_name                          <chr> "", "", "PÃ¢tes de fruits", "...
## $ packaging                             <chr> "Bocal,Verre", "Plastic,Box",...
## $ brands                                <chr> "Casino DÃ©lices", "Guylian",...
## $ categories                            <chr> "Aliments et boissons Ã  base...
## $ origins                               <chr> "", "", "", "", "Argentina", ...
## $ manufacturing_places                  <chr> "France", "Belgium", "", "Ita...
## $ labels                                <chr> "", "", "", "Vegetariano,Vega...
## $ emb_codes                             <chr> "EMB 78015", "", "", "", "ES ...
## $ emb_codes_tags                        <chr> "emb-78015", "", "", "", "es-...
## $ cities                                <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ cities_tags                           <chr> "andresy-yvelines-france", ""...
## $ purchase_places                       <chr> "Lyon,France", "NSW,Australia...
## $ countries                             <chr> "France", "Australia", "Franc...
## $ countries_en                          <chr> "France", "Australia", "Franc...
## $ allergens                             <chr> "", "", "", "", "", "", "", "...
## $ traces                                <chr> "Lait,Fruits Ã  coque", "", "...
## $ traces_en                             <chr> "Milk,Nuts", "", "", "", "Nut...
## $ serving_size                          <chr> "15 g", "", "", "", "", "", "...
## $ no_nutriments                         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ additives                             <chr> "[ sucre-de-canne -> fr:sucre...
## $ additives_en                          <chr> "E440 - Pectins", "", "E440 -...
## $ ingredients_from_palm_oil             <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ ingredients_from_palm_oil_tags        <chr> "", "", "", "", "", "", "", "...
## $ ingredients_that_may_be_from_palm_oil <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ image_small_url                       <chr> "http://en.openfoodfacts.org/...
## $ energy_from_fat_100g                  <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ fat_100g                              <fct> 0, 0, 0, 16.7, 45.5, 0, 0, 25...
## $ saturated_fat_100g                    <fct> 0, 0, 0, 9.9, 5.2, 0, 0, 17, ...
## $ butyric_acid_100g                     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ caproic_acid_100g                     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ caprylic_acid_100g                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ capric_acid_100g                      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ lauric_acid_100g                      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ myristic_acid_100g                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ palmitic_acid_100g                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ stearic_acid_100g                     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ arachidic_acid_100g                   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ behenic_acid_100g                     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ lignoceric_acid_100g                  <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ cerotic_acid_100g                     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ montanic_acid_100g                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ melissic_acid_100g                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ monounsaturated_fat_100g              <fct> 0, 0, 0, 2.9, 9.5, 0, 0, 0, 0...
## $ polyunsaturated_fat_100g              <fct> 0, 0, 0, 3.9, 32.8, 0, 0, 0, ...
## $ omega_3_fat_100g                      <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ alpha_linolenic_acid_100g             <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ eicosapentaenoic_acid_100g            <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ docosahexaenoic_acid_100g             <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ omega_6_fat_100g                      <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ linoleic_acid_100g                    <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ arachidonic_acid_100g                 <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ gamma_linolenic_acid_100g             <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ dihomo_gamma_linolenic_acid_100g      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ omega_9_fat_100g                      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ oleic_acid_100g                       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ elaidic_acid_100g                     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ gondoic_acid_100g                     <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ mead_acid_100g                        <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ erucic_acid_100g                      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ nervonic_acid_100g                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ trans_fat_100g                        <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ cholesterol_100g                      <fct> 0, 0, 0, 2e-04, 0, 0, 0, 0, 0...
## $ carbohydrates_100g                    <fct> 54, 0, 0, 5.7, 17.3, 0, 0, 0....
## $ sugars_100g                           <fct> 54, 0, 0, 4.2, 2.7, 0, 0, 0.5...
## $ sucrose_100g                          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ glucose_100g                          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ fructose_100g                         <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ lactose_100g                          <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ maltose_100g                          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ maltodextrins_100g                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ starch_100g                           <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ polyols_100g                          <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ fiber_100g                            <fct> 0, 0, 0, 0.2, 9, 0, 0, 0, 0, ...
## $ proteins_100g                         <fct> 0, 0, 0, 2.9, 18.2, 0, 0, 15,...
## $ casein_100g                           <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ serum_proteins_100g                   <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ nucleotides_100g                      <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ salt_100g                             <fct> 0, 0, 0, 0.0508, 3.9878, 0, 0...
## $ sodium_100g                           <fct> 0, 0, 0, 0.02, 1.57, 0, 0, 0....
## $ alcohol_100g                          <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_a_100g                        <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ beta_carotene_100g                    <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_d_100g                        <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_e_100g                        <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_k_100g                        <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_c_100g                        <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_b1_100g                       <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_b2_100g                       <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_pp_100g                       <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_b6_100g                       <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_b9_100g                       <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ vitamin_b12_100g                      <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ biotin_100g                           <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ pantothenic_acid_100g                 <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ silica_100g                           <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ bicarbonate_100g                      <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ potassium_100g                        <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ chloride_100g                         <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ calcium_100g                          <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ phosphorus_100g                       <fct> 0, 0, 0, 0, 1.155, 0, 0, 0, 0...
## $ iron_100g                             <fct> 0, 0, 0, 0, 0.0038, 0, 0, 0, ...
## $ magnesium_100g                        <fct> 0, 0, 0, 0, 0.129, 0, 0, 0, 0...
## $ zinc_100g                             <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ copper_100g                           <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ manganese_100g                        <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ fluoride_100g                         <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ selenium_100g                         <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ chromium_100g                         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ molybdenum_100g                       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ iodine_100g                           <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ caffeine_100g                         <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ taurine_100g                          <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ ph_100g                               <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ fruits_vegetables_nuts_100g           <fct> 54, 0, 0, 0, 0, 0, 0, 0, 0, 0...
## $ collagen_meat_protein_ratio_100g      <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ cocoa_100g                            <fct> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ chlorophyl_100g                       <dbl> 0, 0, 0, 0, 0, 0, 0, 0, 0, 0,...
## $ nutrition_score_fr_100g               <fct> 11, 0, 0, 11, 17, 0, 0, 10, 0...
## $ nutrition_score_uk_100g               <fct> 11, 0, 0, 11, 17, 0, 0, 15, 0...
\end{verbatim}

\end{document}
